<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{An R Markdown Vignette made with knitr}
-->

```{r load}
library(rmangal)
library(plyr)
```

# rmangal - R access to hosted MANGAL API

The `mangal` project is a [data specification][dataspec] and [API][api],
desgined to facilitate the retrieval, archival, and re-use of data on
ecological interactions.

# An overview of the mangal format

%%TODO the replicated-web paradigm

%%TODO general statement about the philosophy

## Informations about interactions

## Informations about network nodes

# Getting to know the API

The only information needed to start working is the URL of the database you want to interact with. By default, `rmangal` will connect you to the main database (at the *Université du Québec à Rimouski*) - you can access the [website] to know more.

```{r firstStep}
netdb <- mangalapi()
```

The `netdb` object is used by all other functions to know where to connect to do a particular operation. We can see the list of methods that are available to work with:

```{r methodsOK}
names(netdb)
```

As an user, you won't have to use this information yourself, but it's important for the `rmangal` package to know which URL to use to retrieve information. The first thing one might want to do, is get a list of all datasets available, and print their name:

```{r listDataset}
all_datasets <- listDataset(netdb)
laply(all_datasets, function(x) x$name)
```

In other situations, you may know the `id` of the dataset you want to work with. You can use the `getDataset` function to access it directly, see its name, and how many networks are in it.

```{r getDataset}
first_dataset <- getDataset(netdb, 1)
first_dataset$name
length(first_dataset$networks)
```

All functions to access information within `rmangal` follow the same naming convention: `get*` will retrieve a *single* object identified by its `id`, and `list*` will retrieve a list of *all* objects of this type. The type of object to retrieve is the *singular* of the object name with its first letter capitalized (*e.g.* networks are `*Network`, taxa are `*Taxa`, ...).

# My first network

In this section, we'll reconstruct a network and plot it using `igraph`.

```{r iPlot}
plot(get_network(netdb, 1))
```

Done!

The `get_network` function

[dataspec]: https://github.com/mangal-wg/mangal-schemes
[website]: http://mangal.uqar.ca/